---
layout: post
title: "ng-conf 2014"
tags: javascript conferences angularjs
published: true
date: 2014-01-23 13:00
---

I was lucky enough to attend the first AngularJS conference, [ng-conf](http://ng-conf.org/).
Here is a summary of two days worth of talks. This is what I learned and found most interesting.
You might consider this article the TLDR version of [all the videos](http://www.youtube.com/user/ngconfvideos) for non-beginners.


### The Future of Angular

In general the AngularJS core team had a lot of promises and enthusiasm for
[EcmaScript 6](http://wiki.ecmascript.org/doku.php?id=harmony:specification_drafts) and
[Web Components](http://www.w3.org/TR/components-intro/) in the future.
Specifically they mentioned their use in Angular 2.0 and gave us some insight into the future of AngularJS.  

Some important things to note:

  - AngularJS is not going away. It will not take a back seat to Angular Dart.
  - "Bind Once" functionality is coming soon in 1.3.
  - There was also a focus on the growth of Angular and the community.
    The core team encouraged everyone, and genuinely wants to enable people, to contribute.
    In this spirit they will be publishing high-level design docs to communicate the vision going forward.


#### Angular 2.0
These are some specific points mentioned by the core team about version 2.0.

  - It will not be backwards compatible with 1.x, and will be written in ES6.
  - You will be able to write code in ES5 or ES6 (which can transpile to ES5).
  - `Object.observe()` will be used for better, more performant, data binding.
  - ES6 Modules will make module definitions cleaner, terser, standards compliant, and will support lazy loading.
  - Annotations (not in the spec yet, but they are hopeful) might facilitate a declarative dependency injection system.
  - Will use Web Components and [Google Polymer](http://www.polymer-project.org) as a polyfill.
  - There will be better mobile support, including *active animations* and offline support.
  - [zone.js](https://github.com/btford/zone.js/) is very awesome and will be used to contextualize blocks of code
    (especially async) making debugging much easier. This also obviates the need for `$apply` and `$digest`.
  - [diary.js](https://github.com/angular/diary.js) Might provide logging and tracing to improve visibility into what angular is doing under the hood.
  - There will be a significantly large reference implementation app.



#### Code Organization / Reuse
  These ideas were taken mostly from the [Double Click team talk](http://www.youtube.com/watch?v=62RvRQuMVyg).  
  Key take-away: be a power users, use `$injector` FTW.  

  - You can use `$injector.invoke(ParentClass, this, {$scope: scope})` as a kind of *super()* method
    when doing controller inheritance.
    Here is a [code example](http://jsfiddle.net/3dPpK/9/) that makes more sense than words.
  - Use `$injector.instantiate()` to instantiate objects in a DI friendly way.
  - Use Angular Services that return a single function, then compose other services or controllers from those singleton functions.
    This can be a good way to organize mixins or one-off reusable functions.
  - Use *"Helper Controllers"* within normal controllers for better code reuse.
    - Supports DI.
    - Supports multiple instances.
    - Supports composition.
    - Supports saved local state.
    - TLDR Example: Do this `$scope.helperCtrlInstance = $controller(HelperCtrl);` inside your normal controller.
    - [A better example](http://jsfiddle.net/8M27W/8/)
  - Create API services that wrap multiple `$resource`s into a logical group.
    It makes working with RESTful objects much nicer.
    This is too detailed for one bullet point so you will have to read through this
    [excellent example code](https://gist.github.com/jelbourn/6276338) for details.
    As a bonus, [also wrap $httpBackend](https://github.com/andresdominguez/angular-meetup/blob/master/test/spec/controllers/controller-test-helper.js)
    so you don not need full URLs in tests.
  - Google and the Angular team have an internal document on file structure best practices, which says:
    - Organize all singletons (directives & services) together.
    - Controllers can live along side views which are organized by feature.



#### Optimization
Generally if you follow the "angular way" you do not have to worry too much about memory leaks or optimizations,
but there are a few things you should be aware of.

  - Use `ng-if`/`ng-switch` instead of `ng-show`/`ng-hide` for sections of DOM that may never been rendered to the user (ie role based access).
    This will bypass Angular compilation for the inner DOM.
  - Compiling DOM fragment and not actually attaching to the DOM can lead to memory leaks.
  - If you ever create scopes manually outside of the router (looking at you DoubleClick), you must clean them up manually or risk memory leaks.
  - `attrs.$set()` / `attrs.$observe()` are faster and preferable to `$scope.$watch()` when possible.
  - For complex $watches use memoization (but dont forget to un-memoize on change).
  - Use [$scope.$watchCollection()](http://docs.angularjs.org/api/ng.$rootScope.Scope) where applicable.



#### Directives
  Some best practices from the [directives talk](http://www.youtube.com/watch?v=UMkd0nYmLzY).

  - Use a custom 2 letter prefix for all your directives to avoid conflicts with third party directives.
  - Use a directive anytime you need: a reusable component, reusable behavior, to wrap jQuery plugins.
  - Create a module separate from your main app module to encapsulate all directives, then require it as a dependency for the main app.
    This will make your directives portable and testable outside of the main app context.
  - When to use the `$compile()` service:
    - To add/remove DOM elements *after* link time.
    - When you need to reuse a template multiple times (think `ng-repeat`).
  - `transclude: 'element'` was mentioned. I was not aware of it, but [apparently](http://docs.angularjs.org/api/ng.$compile)
    it "will transclude the whole element including any directives defined at lower priority"
    as opposed to transcluding just the content of the directive.
  - Directives are great for creating browser shims for newer HTML attributes (ie the `placeholder` attribute).



#### Promises
  An [entire talk was dedicated to promises](http://www.youtube.com/watch?v=XcRdO5QVlqE),
  which offered a really great explanation. Here are AngularJS-related points I found particularly interesting.

  - Use `resolve` in your routes to inject promises. This will make sure all data is available before route is even loaded.
  - Use an `$httpProvider` interceptor to create a universal loader to show when anything async is happening.



#### Auth
  A lot of people were asking about authentication and these are some tips that were given.

  - Save users a round-trip by doing auth on the initial page load and baking the user object into the index page if they are already logged in.
  - Take advantage of constants instead of using `$rootScope` for globals. This makes things modular and easier to test.
    `$provide.constant('activeUserProfile', userObject)`
  - Again, make your own service for API requests and do all authentication there.



### Tools and Libraries
These are some tools and libraries discussed by the speakers at some point or another.

  - [ngmodules.org](http://ngmodules.org/) - Find all your third party angular modules here.
  - [Protractor](https://github.com/angular/protractor) - AngularJS E2E test framework. Google uses it, so should you.
  - [Restangular](https://github.com/mgonto/restangular) - A more robust replacement for `$resource`.
  - [ES6ify](https://github.com/thlorenz/es6ify) - Compile ES6 to ES5 on the fly.
  - [Cordova / PhoneGap](http://cordova.apache.org/) - A platform for building native mobile apps using HTML, CSS, and JavaScript.
    Sems to have improved over the years, and it looks like there are some nice AngularJS related libraries for it now.
  - [angular-jqm](https://github.com/angular-widgets/angular-jqm) - AngularJS directives for jQuery Mobile.
  - [angular-phonegap](https://github.com/mstaessen/angular-phonegap) - A collection of AngularJS wrappers for Cordova/Phonegap APIs.
  - [hammer.js](http://eightmedia.github.io/hammer.js/) - A library for multi-touch gestures.
  - [Firebase](https://www.firebase.com/) - One of the sponsors whose product looks great for rapid prototyping.
  - [firebaseapp.com](https://www.firebaseapp.com/) - Firebase announced free static site hosting here.

