---
layout: post
title: "ng-conf"
tags: javascript conferences angularjs
published: false
date: 2014-01-23 13:00
---

I was lucky to get tickets to the AngularJS [ng-conf](http://ng-conf.org/) last week.
This is a quick summary of what I learned and found most interesting.

You can find all the videos on [Youtube](http://www.youtube.com/user/ngconfvideos).


### The Future of Angular

In general the AngularJS core team had a lot of promises and enthusiasm for
[EcmaScript 6](http://wiki.ecmascript.org/doku.php?id=harmony:specification_drafts) and
[Web Components](http://www.w3.org/TR/components-intro/). Specifically they mentioned:

  - We have been assured that AngularJS will always exist and will not be overtaken by Angular Dart.
  - Bind once is coming soon in 1.3

Angular 2.0

  - Will not be backwards compatible with 1.x, and will be written in ES6.
  - You will be able to choose to write in ES5 or ES6 which can transpile to ES5.
  - Object.observe will be used for better data binding.
  - ES6 Modules will make module definitions cleaner, terser, standards compliant, and will support lazy loading.
  - Annotations (not in the spec yet, but they are hopeful) will facilitate a dependency injection system.
  - Will use [Polymer](http://www.polymer-project.org) for as a Web Components polyfill.
  - There will be better mobile support, including *active animations* and offline support.
  - [zone.js](https://github.com/btford/zone.js/) is very awesome and will be used to contextualize blocks of code
    (even async code) making debugging much easier. This also obviates the need for $apply and $digest.
  - [diary.js](https://github.com/angular/diary.js) - logging and tracing to improve visibility into what angular is doing under the hood.
  - There was also a focus on the growth of Angular and the community.
    The core team really encouraged everyone to contribute, and genuinely wants to help enable people to contribute.
    In this spirit they will be publishing high-level design docs to communicate the vision going forward.
  - There will be a large reference implementation app.



#### Code Organization / Reuse
  These ideas were taken mostly from the [Double Click team talk](http://www.youtube.com/watch?v=62RvRQuMVyg).

  You can use $injector.invoke() inside one controller to inherit from another controller if you pass the scope.

  One technique is to have Angular Services return a single function, then compose other services or controllers from those.

  Use *Helper Controllers* within normal controllers.
    - supports Di
    - supports multiple instances
    - example: `$scope.fooCtrl = $controller(fooCtrl, {scope: $scope.$new()});1

  Create API services that wrap multiple $resource.

  $injector.instantiate() to use DI and create model instance objects.

  Wrap $httpBackend so you dont need full urls in expect() calls.
  Use method names instead of urls. Declarative, fluent, custom jasmine matchers makes maintaining tests much easier.

  ANGULAR gives you the basics. Build your own tools on top to reduce boilerplate etc.

  Google and the Angular team have an internal document on file structure best practices, which says:
  Organize all singletons (directives & services) together.
  Controllers can live along side views which are organized by feature.



#### Optimization
  - Reduce DOM operations.
  - Use `ng-if`/`ng-switch` instead of `ng-show`/`ng-hide` for sections of DOM that may never been rendered to the user (ie role based access).
    This will bypass Angular compilation for the inner DOM.
  - Compile DOM fragment and dont attach to DOM will lead to memory leaks
  - If you ever create scopes manually outside of the router.
  - `attrs.$set()` / `attrs.$observe()` are faster and preferable to `$scope.$watch()` when possible.
  - For complex $watches use memoization (dont forget to unmemoize on change).
  - Use [$scope.$watchCollection()](http://docs.angularjs.org/api/ng.$rootScope.Scope) where applicable.



#### Directives
  Some best practices from the directives talk.

  Use a custom 2 letter prefix for all your directives to avoid conflicts with third party directives.

  Use a directive anytime you need: a reusable component, reusable behavior, to wrap jQuery plugins.

  Create a module separate from your main app module to encapsulate all directives, then require it as a dependency for the main app.

  When to use `$compile()` function
    - To add/remove DOM elements *after* link time.
    - When you need to reuse a template multiple times (think `ng-repeat`).

  Lazy load expensive stuff directive
    - set "priority"
    - set "terminal"

  What is this? transclude: 'element'

  Create directives for standard HTML element attributes which are not supported in all browsers (ie the `placeholder` attribute.)

#### Promises
  Use *resolve* in your routes to inject promises. This will make sure all data is available before route is even loaded

  Use an $httpProvider interceptor to create a universal loader to show when anything async is happening.



#### Auth
  Save users a round-trip by doing auth on the initial page load and baking the user object into the index page if they are already logged in.

  Take advantage of constants intead of using $rootScope for globals. This makes this more modular and easier to test.
  $provide.constant('activeUserProfile', userObject);

  Make your own service for API requests and do all authentication there.



### Tools and Libraries
  - wijmo
  - Firebase
  - firebaseapp.com - free static site hosting
  - Protractor - Angular E2E testing
  - https://github.com/angular-widgets/angular-jqm
  - PhoneGap / Cordova
  - ngmodules.org - find all your third party angular modules here 
  - Restangular - a more robust replacement for $resource

